<html>
    <head>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>  
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
    </head>
    <body>
        <table id="roi-table" class="display">
            <thead>
                <tr>
                    <th>Variable</th>
                    <th>Value</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class='section-header'>Containment ROI</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Cost per contained call</td>
                    <td><input type="text" id="cost-per-iva-call" name="cost-per-iva-call" value="0.5" class='dollars'></td>
                    <td>Cost of a call handled by IVA without going to agent</td>
                </tr>
                <tr>
                    <td>Cost per agent call</td>
                    <td><input type="text" id="cost-per-agent-call" name="cost-per-agent-call" value="5" class='dollars'></td>
                    <td>Average cost of a call handled by customer service agent</td>
                </tr>
                <tr>
                    <td>Calls per day</td>
                    <td><input type="text" id="calls-per-day" name="calls-per-day" value="10000" class='integer'></td>
                    <td>Average number of calls per day</td>
                </tr>
            </tbody>
        </table>
        
        <script>
            var table = $('#roi-table').DataTable({
                "info":     false,
                "ordering": false,
                "paging":   false,
                "searching": false
            });
            
            table.on( 'draw', function () {
                //alert( 'Table redrawn' );
            } );
            //table.cell(0,0).inline()

            $('.dollars').each((index, element) => {
                const e = $(element)
                e.val(formatDollars(e.val()))
            })

            $('.dollars').change((e) => {
                const value = $(e.target).val()
                $(e.target).val(formatDollars(value))
            })


            $('.integer').each((index, element) => formatInteger(element))
            $('.integer').change((e) => formatInteger(e.target))

            function formatDollars(s) {
                return numeral(s).format('$0,0.00')
            }

            function formatInteger(e) {
                const element = $(e)
                const value = element.val()
                element.val(numeral(value).format('0,0'))
            }
        </script>
    </body>
</html>
